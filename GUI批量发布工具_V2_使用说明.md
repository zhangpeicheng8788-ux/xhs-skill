# 小红书批量发布 GUI V2.0 - 使用说明

## 🆕 V2.0 新功能

### 核心升级

✅ **手动指定发布资源路径** - 在发布按钮上方新增路径选择功能  
✅ **路径浏览选择** - 支持可视化文件夹选择  
✅ **智能笔记检测** - 自动检测笔记结构和数量  
✅ **保持原有逻辑** - 批量发布、时间间隔、暂停/继续功能完整保留  

---

## 🚀 启动方式

### 方式 1：双击批处理文件（推荐）

双击文件：`start_publish.bat`

### 方式 2：命令行运行

```bash
# 基本启动
python D:\20260127XHS\Auto-Redbook-Skills-main\scripts\publish_gui_v2.py

# 指定默认路径
python D:\20260127XHS\Auto-Redbook-Skills-main\scripts\publish_gui_v2.py --path D:\jieyue_work

# 指定起始笔记和间隔
python D:\20260127XHS\Auto-Redbook-Skills-main\scripts\publish_gui_v2.py --path D:\jieyue_work --start 1 --interval 20
```

---

## 📖 使用流程

### 第 1 步：启动 GUI

双击 `start_publish.bat` 或运行 Python 脚本

### 第 2 步：选择资源路径

在 GUI 界面顶部的"发布资源路径"区域：

1. **方式 A**：直接输入路径
   - 在输入框中输入路径，如：`D:\jieyue_work`

2. **方式 B**：点击"浏览..."按钮
   - 弹出文件夹选择对话框
   - 选择包含笔记的文件夹

3. **方式 C**：拖拽文件夹（部分系统支持）
   - 直接拖拽文件夹到输入框

### 第 3 步：检测笔记

点击"检测笔记"按钮：

- ✅ 自动检测笔记结构（单笔记或多笔记）
- ✅ 显示笔记数量和图片数量
- ✅ 在日志区域显示详细信息

**检测结果示例**：
```
检测到多笔记结构，共 5 个笔记
  [1] note_1: 7 张图片
  [2] note_2: 8 张图片
  [3] note_3: 10 张图片
  [4] note_4: 12 张图片
  [5] note_5: 14 张图片
检测完成！可以开始发布
```

### 第 4 步：配置发布参数

在配置区域设置：

- **起始笔记**：从第几篇开始发布（默认：1）
- **发布间隔**：每篇笔记之间的间隔时间，单位：分钟（默认：20）

### 第 5 步：开始发布

点击"开始发布"按钮：

- ✅ 自动加载 Cookie
- ✅ 创建小红书客户端
- ✅ 按顺序发布笔记
- ✅ 每篇间隔指定时间
- ✅ 实时显示发布进度和日志

### 第 6 步：监控发布过程

**可用操作**：
- **暂停**：暂停发布任务（可继续）
- **停止**：停止发布任务（需重新开始）
- **查看日志**：实时查看发布详情

---

## 🎯 界面说明

### 1. 标题栏
```
小红书笔记批量发布工具 V2.0
```

### 2. 资源路径选择区（新增）
```
📂 发布资源路径:
[输入框: D:\jieyue_work          ] [浏览...] [检测笔记]
提示：选择包含笔记的文件夹（如 D:\jieyue_work）
```

**功能**：
- 输入框：手动输入或显示选择的路径
- 浏览按钮：打开文件夹选择对话框
- 检测笔记按钮：检测并验证笔记结构

### 3. 配置信息区
```
笔记数量: 5 个                    起始笔记: [1]  发布间隔(分钟): [20]
```

**功能**：
- 显示检测到的笔记数量
- 设置起始笔记编号
- 设置发布间隔时间

### 4. 进度信息区
```
准备就绪，请先选择资源路径并检测笔记
```

**状态显示**：
- 准备状态
- 发布进度
- 等待倒计时

### 5. 日志输出区
```
发布日志:
[时间戳] 日志内容...
```

**显示内容**：
- 操作日志
- 发布详情
- 错误信息

### 6. 按钮控制区
```
[开始发布] [暂停] [停止]                                    [退出]
```

**按钮功能**：
- 开始发布：启动批量发布任务
- 暂停：暂停任务（可继续）
- 停止：停止任务
- 退出：关闭程序

---

## 📂 支持的笔记结构

### 结构一：单个笔记

```
D:\jieyue_work\note_1\
├── cover.png          # 封面（必需）
├── card_1.png         # 内容卡片
├── card_2.png
├── ...
└── metadata.json      # 元数据（可选）
```

**使用场景**：发布单篇笔记

### 结构二：多个笔记

```
D:\jieyue_work\
├── note_1\
│   ├── cover.png
│   ├── card_*.png
│   └── metadata.json
├── note_2\
│   ├── cover.png
│   ├── card_*.png
│   └── metadata.json
└── ...
```

**使用场景**：批量发布多篇笔记

---

## ⚙️ 发布逻辑

### 1. 笔记检测

- 自动识别单笔记或多笔记结构
- 验证每个笔记是否包含 cover.png
- 统计图片数量（最多9张）

### 2. 发布顺序

- 按文件夹名称排序
- 从指定的起始笔记开始
- 跳过已发布的笔记（有 publish_record.json）

### 3. 发布间隔

- 每篇笔记发布后等待指定时间
- 倒计时显示剩余时间
- 支持暂停和继续

### 4. 发布记录

每篇笔记发布成功后，在笔记目录生成 `publish_record.json`：

```json
{
  "note_id": "note_1",
  "title": "笔记标题",
  "published_at": "2026-01-29T14:30:00",
  "note_id_xhs": "6978527100000000220308dc",
  "link": "https://www.xiaohongshu.com/explore/6978527100000000220308dc"
}
```

---

## 🔧 常见问题

### Q1：提示"未找到 Cookie"

**原因**：未登录小红书

**解决**：
```bash
python D:\20260127XHS\Auto-Redbook-Skills-main\scripts\login_xhs.py
```

扫码登录后，Cookie 会自动保存到 `.env` 文件

---

### Q2：检测不到笔记

**原因**：笔记结构不正确

**解决**：
1. 确保文件夹包含 `cover.png`
2. 确保有 `card_1.png`, `card_2.png` 等内容卡片
3. 检查文件名是否正确（小写，下划线）

---

### Q3：发布失败

**可能原因**：
1. Cookie 失效 → 重新登录
2. 网络问题 → 检查网络连接
3. 图片格式问题 → 确保为 PNG 格式
4. 内容违规 → 检查内容是否符合平台规范

**查看详细错误**：
- 在日志区域查看错误信息
- 根据提示进行相应处理

---

### Q4：如何暂停和继续？

**暂停**：
- 点击"暂停"按钮
- 当前笔记发布完成后暂停
- 不会中断正在发布的笔记

**继续**：
- 点击"继续"按钮
- 从下一篇笔记继续发布

---

### Q5：如何跳过已发布的笔记？

**自动跳过**：
- GUI 会自动检测 `publish_record.json`
- 已发布的笔记会自动跳过
- 在日志中显示"笔记已发布，跳过"

**重新发布**：
- 删除笔记目录中的 `publish_record.json`
- 重新运行发布任务

---

## 💡 使用技巧

### 技巧 1：测试发布

**建议**：
1. 先用 1-2 篇笔记测试
2. 确认发布成功后再批量发布
3. 设置较长的间隔时间（如 30 分钟）

### 技巧 2：分批发布

**场景**：笔记较多时

**方法**：
1. 第一批：设置起始笔记为 1
2. 第二批：设置起始笔记为 6（假设第一批发布了 5 篇）
3. 依次类推

### 技巧 3：监控发布状态

**实时监控**：
- 查看日志区域的发布详情
- 注意错误信息
- 记录发布的笔记 ID 和链接

### 技巧 4：优化发布时间

**最佳时段**：
- 早上 7:00-9:00
- 中午 12:00-14:00
- 晚上 19:00-22:00

**建议间隔**：
- 正常：20-30 分钟
- 保守：30-60 分钟
- 快速：10-15 分钟（不推荐）

---

## 📊 V2.0 vs V1.0 对比

| 功能 | V1.0 | V2.0 |
|------|------|------|
| **资源路径** | 固定路径 | ✅ 手动指定 |
| **路径选择** | 命令行参数 | ✅ GUI 浏览选择 |
| **笔记检测** | 自动扫描 | ✅ 手动检测验证 |
| **结构支持** | 多笔记 | ✅ 单笔记+多笔记 |
| **实时反馈** | 日志显示 | ✅ 日志+进度条 |
| **批量发布** | ✅ 支持 | ✅ 支持 |
| **时间间隔** | ✅ 支持 | ✅ 支持 |
| **暂停/继续** | ✅ 支持 | ✅ 支持 |

---

## 📁 文件位置

| 文件 | 路径 |
|------|------|
| GUI 脚本 | `D:\20260127XHS\Auto-Redbook-Skills-main\scripts\publish_gui_v2.py` |
| 启动文件 | `D:\20260127XHS\Auto-Redbook-Skills-main\start_publish.bat` |
| Cookie 文件 | `D:\20260127XHS\Auto-Redbook-Skills-main\.env` |

---

## 🎉 开始使用

**最简单的方式**：

1. 双击 `start_publish.bat`
2. 在 GUI 中选择笔记文件夹
3. 点击"检测笔记"
4. 点击"开始发布"

就这么简单！
